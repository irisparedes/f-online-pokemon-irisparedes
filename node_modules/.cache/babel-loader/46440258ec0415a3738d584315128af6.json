{"ast":null,"code":"import _objectSpread from \"/Users/macbook/Iris/f-online-pokemon-irisparedes/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/macbook/Iris/f-online-pokemon-irisparedes/src/components/App/index.js\";\nimport React, { Component } from 'react';\nimport './styles.scss';\nimport { fetchPokemon } from '../../services/fetchPokemon';\nimport { Route, Switch } from 'react-router-dom';\nimport Home from '../Home';\nimport PokemonDetails from '../PokemonDetails';\nconst totalPokemons = 25;\nconst urlApi = \"https://pokeapi.co/api/v2/pokemon/?limit=\".concat(totalPokemons);\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pokemonList: [],\n      filterBy: ''\n    };\n    this.getUserValue = this.getUserValue.bind(this);\n  }\n\n  componentDidMount() {\n    const localData = JSON.parse(localStorage.getItem('pokeList'));\n\n    if (!localData) {\n      fetchPokemon(urlApi).then(data => {\n        data.results.forEach(pokemon => {\n          fetchPokemon(pokemon.url).then(pokemon => {\n            let pokemonData = pokemon;\n            fetchPokemon(pokemon.species.url).then(moreData => {\n              pokemonData = _objectSpread({}, pokemonData, moreData);\n              this.setState(prevState => {\n                return {\n                  pokemonList: [...prevState.pokemonList, pokemonData]\n                };\n              }, () => this.orderAndSaveToLocal(this.state.pokemonList));\n            });\n          });\n        });\n      }).catch(error => console.log('error', error));\n    } else {\n      this.setState({\n        pokemonList: localData\n      });\n    }\n  }\n\n  orderAndSaveToLocal(array) {\n    if (array.length === totalPokemons) {\n      array.sort((pokemonA, pokemonB) => pokemonA.id - pokemonB.id);\n      this.setState({\n        pokemonList: array\n      });\n      localStorage.setItem('pokeList', JSON.stringify(array));\n    }\n  }\n\n  getUserValue({\n    target: {\n      value\n    }\n  }) {\n    this.setState({\n      filterBy: value\n    });\n  } // clearFilter() {\n  //   this.setState({ filterBy: '' });\n  // }\n\n\n  render() {\n    const _this$state = this.state,\n          pokemonList = _this$state.pokemonList,\n          filterBy = _this$state.filterBy;\n    return React.createElement(\"div\", {\n      className: \"page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"page__container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Home, {\n        filterBy: filterBy,\n        pokemonList: pokemonList,\n        getUserValue: this.getUserValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/pokemon/:id\",\n      render: routerProps => React.createElement(PokemonDetails, {\n        id: routerProps.match.params.id,\n        pokemonList: pokemonList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/macbook/Iris/f-online-pokemon-irisparedes/src/components/App/index.js"],"names":["React","Component","fetchPokemon","Route","Switch","Home","PokemonDetails","totalPokemons","urlApi","App","constructor","props","state","pokemonList","filterBy","getUserValue","bind","componentDidMount","localData","JSON","parse","localStorage","getItem","then","data","results","forEach","pokemon","url","pokemonData","species","moreData","setState","prevState","orderAndSaveToLocal","catch","error","console","log","array","length","sort","pokemonA","pokemonB","id","setItem","stringify","target","value","render","routerProps","match","params"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './styles.scss';\nimport { fetchPokemon } from '../../services/fetchPokemon';\nimport { Route, Switch } from 'react-router-dom';\nimport Home from '../Home';\nimport PokemonDetails from '../PokemonDetails';\n\nconst totalPokemons = 25;\nconst urlApi = `https://pokeapi.co/api/v2/pokemon/?limit=${totalPokemons}`;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pokemonList: [],\n      filterBy: ''\n    };\n    \n    this.getUserValue = this.getUserValue.bind(this);\n  }\n\n  componentDidMount() {\n    const localData = JSON.parse(localStorage.getItem('pokeList'));\n    if (!localData) {\n      fetchPokemon(urlApi)\n        .then(data => {\n          data.results.forEach(pokemon => {\n            fetchPokemon(pokemon.url)\n              .then(pokemon => {\n                let pokemonData = pokemon;\n                fetchPokemon(pokemon.species.url)\n                  .then(moreData => {\n                    pokemonData = { ...pokemonData, ...moreData };\n                    this.setState(prevState => {\n                        return { pokemonList: \n                          [...prevState.pokemonList, \n                            pokemonData] };\n                      },\n                      () => this.orderAndSaveToLocal(this.state.pokemonList)\n                    );\n                  });\n                });\n              });\n        })\n        .catch(error => console.log('error', error));\n    } else {\n      this.setState({ pokemonList: localData });\n    }\n  }\n\n  orderAndSaveToLocal(array) {\n    if (array.length === totalPokemons) {\n      array.sort((pokemonA, pokemonB) => pokemonA.id - pokemonB.id);\n      this.setState({ pokemonList: array });\n      localStorage.setItem('pokeList', JSON.stringify(array));\n    }\n  }\n\n  getUserValue({ target: { value } }) {\n    this.setState({ filterBy: value });\n  }\n\n  // clearFilter() {\n  //   this.setState({ filterBy: '' });\n  // }\n\n  render() {\n    const { pokemonList, filterBy } = this.state;\n    return (\n      <div className=\"page\">\n        <div className=\"page__container\">\n          <Switch>\n            <Route exact path=\"/\" render={() => \n              <Home \n                filterBy={filterBy} \n                pokemonList={pokemonList} \n                getUserValue={this.getUserValue} />} />\n            <Route path=\"/pokemon/:id\" render={routerProps => \n              <PokemonDetails \n                id={routerProps.match.params.id} \n                pokemonList={pokemonList} />} />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}